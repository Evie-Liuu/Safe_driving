# 汽車不禮讓行人 - 可視化示意圖

## 俯視圖(Top View)

```
                人行道
                  │
    ╔═════════════╬═════════════╗
    ║             ┃             ║
    ║     🚗      ┃      🚗     ║  車道
    ║   汽車      ┃      往     ║
    ║   往這      ┃      這     ║
    ║   邊開      ┃      邊     ║
    ║             ┃             ║
    ╠═════════════╬═════════════╣
    ║   斑馬線    ┃   斑馬線    ║  ← 危險區域
    ║ ▓▓▓▓▓▓▓▓▓▓ ╋ ▓▓▓▓▓▓▓▓▓▓ ║
    ║ ▓▓▓▓▓▓▓▓▓▓ ╋ ▓▓▓▓▓▓▓▓▓▓ ║
    ║ ▓▓▓▓▓▓▓▓▓▓ 🚶 ▓▓▓▓▓▓▓▓▓▓ ║  ← 行人穿越路徑
    ║ ▓▓▓▓▓▓▓▓▓▓ ┃ ▓▓▓▓▓▓▓▓▓▓ ║
    ║ ▓▓▓▓▓▓▓▓▓▓ ┃ ▓▓▓▓▓▓▓▓▓▓ ║
    ╠═════════════╬═════════════╣
    ║             ┃             ║
    ║             ┃             ║
    ║             ┃             ║
    ╚═════════════╬═════════════╝
                  │
                人行道
```

## 交會點詳細圖

```
  Z軸 (123.71 → 105.12)
   ↑
   │
   │  起點
   │  [-13.22, 123.71]
   │       🚶
   │        │
   │        │ 行人路徑
   │        │ (垂直移動)
   │        │
   │        ↓
   │  [-13.47, 114.5]
   │        🚶 ← 斑馬線中間
   │        ↓
   │        │
   │  終點  │
   │  [-13.72, 105.12]
   │
   └────────────────────────→ X軸
     -7.84  -13.5  -20  -96

     起點    交會點        後續
     🚗 ─→─→─ ⚠️ ─→─→─→─→ 🚗
     [-7.84]  [-13.5]      [-96]
              [114.5]

     汽車路徑 (水平移動)
```

## 危險時刻動畫序列

### T = 0.0秒
```
     人行道
    ═══════
    ▓▓▓▓▓▓▓
    ▓ 🚶  ▓  ← 行人開始穿越
    ▓▓▓▓▓▓▓
    ═══════
       │
       │
    🚗 │    ← 汽車還在遠處
```

### T = 1.0秒
```
     人行道
    ═══════
    ▓▓▓▓▓▓▓
    ▓  ↓  ▓
    ▓  🚶 ▓  ← 行人在斑馬線上
    ▓▓▓▓▓▓▓
    ═══════
      │
      │ 🚗  ← 汽車啟動接近
```

### T = 1.8-2.0秒 ⚠️ 危險!
```
     人行道
    ═══════
    ▓▓▓▓▓▓▓
    ▓  ↓  ▓
    ▓  🚶🚗  ← 交會! 汽車未減速
    ▓▓▓▓▓▓▓
    ═══════
```

### T = 2.5秒
```
     人行道
    ═══════
    ▓▓▓▓▓▓▓
    ▓  🚶 ▓  ← 行人繼續
    ▓  ↓  ▓
    ▓▓▓▓▓▓▓
    ═══════
          🚗 → 汽車已通過
```

### T = 5.3秒
```
     人行道
    ═══════
    ▓▓▓▓▓▓▓
    ▓     ▓
    ▓  🚶 ▓  ← 行人到達對面
    ▓▓▓▓▓▓▓
    ═══════
                  🚗 遠離
```

## 3D坐標系統

```
        Y (高度)
        │
        │
        │
        └─────────── X (左右)
       ╱
      ╱
     Z (前後)

行人移動方向: Z軸 (123.71 → 105.12)
汽車移動方向: X軸 (-7.84 → -96.34)
交會點: X ≈ -13.5, Z ≈ 114.5
```

## 速度向量圖

```
行人速度向量:
    ↓ (0, 0, -3.5)
    │ 速度: 3.5 單位/秒
    🚶


汽車速度向量:
    🚗 ─────→ (-11, 0, 0)
    速度: 11 單位/秒 (未減速!)


相對速度:
    ↙
    斜向交會
    碰撞風險高!
```

## 距離-時間圖

```
距離(到交會點)
  │
  │ ┌────╲              行人
  │ │     ╲───╲
  │ │         ╲───╲
  │ │             ╲───┐到達
  │ │
  │ │    汽車
  │ │       ╲─────╲
  │ │           ╲───┐到達
  │ │
  └─┴─────────────────────→ 時間(秒)
    0   1.0   1.8 2.0
        啟動  危險時刻
```

## 安全 vs 不禮讓 對比

### 安全做法 ✅
```
T = 0.0s: 行人開始 🚶
T = 1.0s: 汽車看到行人
T = 1.5s: 🚗💨 汽車減速
T = 2.0s: 🚗🛑 汽車停止禮讓
T = 3.0s: 行人通過 🚶✓
T = 4.0s: 🚗 汽車繼續
```

### 不禮讓(危險) ⚠️
```
T = 0.0s: 行人開始 🚶
T = 1.0s: 汽車啟動 🚗
T = 1.5s: 🚗💨 汽車未減速!
T = 2.0s: 🚶🚗💥 危險交會!
T = 2.5s: 汽車穿過 🚗💨
```

## 玩家視角

```
第一人稱視角(駕駛)
╔══════════════════════════╗
║                          ║
║      🚶                  ║  ← 看到行人在斑馬線上
║       ┃                  ║
║  ▓▓▓▓▓╋▓▓▓▓▓            ║  ← 斑馬線
║       ┃                  ║
║                          ║
║                          ║
║   ════🚗════             ║  ← 你的車
╚══════════════════════════╝

❓ 你會:
A. 加速通過
B. 按喇叭
C. 減速禮讓 ✅
D. 繼續原速
```

## 調試視圖

```
啟用 enableDebug={true} 後:

    人行道
   ═══════
   ▓▓▓▓▓▓▓
   ● 🚶 ●  ← 黃色球 = 路徑點
   ▓▓▓▓▓▓▓
   ●══●══
   ● │ ● 🚗 ← 黃色球顯示所有路徑點
   ●══●══

   檢查:
   - 路徑點是否交叉
   - 間距是否合理
   - 方向是否正確
```

## 重播循環

```
事件週期 (replayInterval: 12秒):

┌─────────────────────────────┐
│ 0s: 行人和汽車出現          │
│                              │
│ 0-5.3s: 事件發生            │
│   └─ 2s: 危險交會 ⚠️        │
│                              │
│ 5.3s: 行人完成              │
│ 11s: 汽車完成               │
│                              │
│ 11s: 物件隱藏 ✨            │
│ 11-23s: 等待重播 (12秒)     │
│                              │
│ 23s: 重置並顯示 ✨          │
└─────────┬───────────────────┘
          │
          └─→ 循環
```

## 實際坐標示例

```javascript
// 交會區域坐標範圍
const crossingZone = {
  x: { min: -14.0, max: -13.0 },
  z: { min: 113.0, max: 115.0 },
};

// 在這個區域內,行人和汽車會交會
// 時間: T = 1.8 - 2.2秒
```
